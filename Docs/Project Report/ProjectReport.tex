\documentclass[letterpaper,12pt]{article}
\usepackage[margin=1in]{geometry}
\usepackage{xltxtra}
\setmainfont[Mapping=tex-text]{Liberation Serif}
\setmonofont[Scale=0.8]{Liberation Mono}
\newcommand{\var}[1]{\texttt{\$\{#1\}}}
\usepackage[colorlinks=false,pdfborder=0 0 0]{hyperref}
\usepackage{graphicx}
\usepackage[numbib]{tocbibind}

\title{Instalog Project Report \\
Interim Report 1}
\author{
Billy R. O'Neal III (bro4@case.edu) \\
Jacob Snyder (jrs213@case.edu) \\ \\
Case Western Reserve University
}

\begin{document}

\maketitle
\vspace{1in}
\begin{center}
\includegraphics[width=2in, height=2in]{figures/InstalogLogo.png}
\end{center}
\newpage



\tableofcontents
\newpage



\section{Abstract} \label{abstract}
The Microsoft Windows operating system is a complicated system.  When it is
working, everything is fine.  However, when something goes wrong, it is often a
frustrating experience troubleshooting what the problem is, so frequently the
easiest fix is to backup the machine and then reformat it and reinstall Windows.
This approach can severely impact productivity and is complicated for
non-technical users.  

One common source of problems for users of the Windows operating system is
infection from malware.  This has caused there to be a sizable market for
antimalware software.  This software is very effective at removing common
infections because at a high level, the software vendors simply need to maintain
a list of common infections and the safe way to remove them.  Some tools are
even moderately effective at removing unknown threats by using heuristic
techniques.  However, these techniques have limited effectiveness especially
against obscure or new malware.  

Therefore, a demand exists for tools that aid users in removing these obscure
malware infections.  This project, Instalog, is a response to this need. 
Instalog is designed to be a tool with two purposes: information gathering and
system repair.

First, it scans Windows installations to gather as much information as possible
about the machine.  It then filters this information using whitelists to remove
mundane information like system defaults.  It outputs a log of information that
is non-standard on the machine which will hopefully aid an expert in identifying
what the root cause of an infection is.

Second, Instalog provides a capacity to fix infections.  Given a log output,
experts can generate scripts to fix an infection either by hand or by using the
GUI.  Instalog can run these scripts to remove an infection.  

Instalog is designed such that it can support three different ``user classes.'' 
The first is that of a ``home user'' that has an infected machine but doesn't
know how to fix it.  This user can use Instalog to scan their machine and then
post it online to get assistance.  Here, an ``expert'' can download the ``home
user's'' log, analyze it, and produce a fix script for them to run.  The ``home
user'' can then download this script and run it using Instalog to fix their
machine.  This process may involve several iterations.  The other user case is
that of a ``system administrator'' that plays both roles -- ``system
administrators'' use Instalog to scan their machines and know enough about the
machine to generate and run a suitable fix script.  

\newpage



\section{Introduction} \label{introduction}
\subsection{Background}
There most certainly is a real need for this product.  In the Related Work
section before, other similar products are listed.  However, they all have their
associated problems and have not been maintained.  There are security
communities online such as Malware Bytes that use these tools to analyze and fix
users' machines.  These forums serve thousands of people a year, and the tools
are downloaded even more frequently after year.  Once this tool is fully
developed, the hope is that this will become the de-facto standard and replace
other tools.

\subsection{Related Work}
Instalog is inspired by several similar tools which all share some basic
functionality.  In many ways, Instalog can be viewed as an evolution of
these tools:

\begin{itemize}
    \item TrendMicro's {\em Hijack This} (HJT)
    \item ``sUBs'' {\em Doesn't Do Squat} (DDS)
    \item ``random/random'''s {\em Random's System Information Tool} (RSIT)
    \item ``OldTimer'''s {\em OTA}, {\em OTS}, and {\em OTL} (formerly
    OTAnalyzeIt, OTScanIt, and OTListIt, respectively)
    \item Sysinternals' {\em Autoruns}
    \item Runscanner's {\em Runscanner}
\end{itemize}

All of these tools purport to accomplish similar goals to Instalog. However,
each of these tools has bugs or specific behavior which cause problems for at
least one of Instalog's three intended user groups.  Specifically, the above
tools contain one or more of the above problems:

\begin{itemize}
    \item Incorrect handling and escaping of log data
    \item Lack of published specifications, documentation, or source code
    \item Outstanding bugs that the authors are unwilling or unable to fix
    \item Lack of scriptability, for the purposes of modifying log output and
    malware removal.
    \item Lack of 64 bit support.
    \item Lack of Unicode support.
    \item Lack of enumeration of some types of useful log information.
\end{itemize}

Instalog will attempt to solve those problems by combining characteristics of
the above tools which are deemed useful while mixing in a few tricks of its
own.

TrendMicro's {\em Hijack This} was open-sourced recently.  The authors of this
project have briefly looked through the project to see if it is worth forking
the project to implement Instalog.  It was determined that the source code is
not up to par.  Not only is it written in Visual Basic, the licensing agreement
on it is unknown at this time.  

\subsection{Progress}
As of this writing, most of the work done so far has been in the direction of
getting the entire project planned out with requirements and specifications.
More details on the project's progress are available in
section~\ref{project_progress}.

Since the requirements and specifications wound up being so much more than
initially anticipated when starting this product, at the suggestion of the
professor, we have put a scope limit on the product.  Essentially, the most
basic of the scanning functionality will be delivered by the end of the Senior
Project course.  The remaining functionality will be implemented in the authors'
remaining free time before summer internships and employment begins.  For more
details on the scope limit, please refer to section~\ref{scope_limit}.

\subsection{Report Structure}
This report is structured using a modified version of the structure proposed in
\cite{ReportGuidelines}.

This report begins with the proposed Abstract (section~\ref{abstract}),
Introduction (section~\ref{introduction}), and Application
(section~\ref{application}) sections.  The Methodology section is not an
explicit section in this document as it has been integrated into the other
documentation of the project.  Therefore, the report dives straight into the
heart of the documentation of the project in the Software Design section
(section~\ref{software_design}).  Since the documentation for this project is
extremely long, this section simply introduces the documents and references them
as external documents.  The proposed User Interface section has been included in
the documents listed in the Software Design section.  Similarly, the proposed
Testing and Evaluation section has been merged into the Software Design section
as a separate stand-alone document. This report then introduces the
aforementioned Scope Limit (section~\ref{scope_limit}) and then moves into the
finer points of the Project Management and Administrative Details
(section~\ref{project_management}) and Project Progress
(section~\ref{project_progress}) sections.  The report then references any
additional external documents in the External Documents section
(section~\ref{documents}) and then lists all of the references made in the
document in the References section.  Lastly, the report mentions the legal
details for the project in the License appendix (appendix~\ref{license}).

\newpage



\section{Application} \label{application}
Instalog can be seen as having three different distinct components:

\begin{enumerate}
  \item Scanning
  \item Scripting and Repairing
  \item GUI
\end{enumerate}

Each of these components will be expanded on in the following subsections.

\subsection{Scanning}
Instalog's scanning abilities are the information-gathering and whitelist
capabilities that will be provided to the user.  Instalog will scan a number of
different types of information such as registry keys, browser settings, and
recently modified files.  These different information points are picked because
they are primarily ``loading points,'' that is, they are locations that malware
would need to modify to be loaded.  Each information point will be filtered
using whitelists that will remove default values and values that are known to be
safe.  What will be left is information that is unique to the user's computer,
hopefully some of which provides information about the malware.

A big challenge with this is the sheer amount of data that is being included in
the scan.  The Instalog project team plan on getting around this by writing
meticulously detailed requirements and specifications documents to make sure
each behavior is well defined before starting to implement the project.
Another challenge with this is making the scan run quickly.  The biggest
challenge is to simply test the scanning behavior.  Since it is impossible to
anticipate every possible machine configuration, the software must be robust
enough to handle varying scenarios across all of the targeted versions of
Windows.

\subsection{Scripting and Repairing}
The next component is Instalog's ability to run scripts and repair systems. 
Instalog will define a scripting language that enables common actions such as
process killing, registry actions, and file quarantine.  It will also provide
scripting actions to run all of the available scanning actions.  This will allow
a script to gather more information about a system if necessary.  

The biggest challenge to this is similar to the scanning challenge -- it will be
very difficult to thoroughly test this.  It is \textit{imperative} that this
functionality is tested extensively though because one mistake in this component
could lead to data loss on a user's machine.  

\subsection{GUI}
The final component of Instalog is the graphical user interface (GUI).  This
interface will allow users to run scans, run scripts, and build scripts based on
scan outputs.  The challenge here is building the GUI using the native GUI
controls, especially since some of the proposed screens such as the script
builder are incredibly complex.  Additionally, the script builder must be tested
heavily as well, because if a poor script is built, this could also lead to data
loss on a user's machine.  

\newpage



\section{Software Design} \label{design}
The nature of this tool is that there are a lot of small little features that
collectively make up each component mentioned in the Application section
(section~\ref{application}).  Alone, each small feature of the tool is quite
manageable and straightforward.  However, when all of the pieces are put
together, there is actually an impressive amount of detail and small nuances
that are required to adequately explain each feature.  Therefore, instead of
including the Software Requirements, Software Specifications, Software Design,
and Testing and Validation documents in this report, they have been written and
included as stand-alone documents.  This was done with the intent of making this
document more readable as well as making each document more maintainable when
they inevitably have to be updated or modified throughout the product
development lifecycle.  Each document is briefly introduced, explained, and
referenced in the following subsections.  Please refer to the specified
documents for more details.

\subsection{Software Requirements}
\label{software_requirements}
The Software Requirements document \cite{Requirements} is designed to be read by
a mostly non-technical audience.  It describes the various features that the
project will have and what criteria these features must meet to be considered
implemented successfully.  This document is written at a fairly high-level view
as the problem space is fairly well defined for this project.

\subsection{Software Requirements Specifications}
\label{software_specifications}
The Software Requirements Specifications document \cite{Specification} is the
document that visits each requirement in the above Software Requirements
document.  This document is quite long because it describes in meticulous detail
how each feature will function, how it must behave, where the data will be
pulled from, etc.  The intent of this document is that it will make the actual
design, implementation, and testing of the project much easier because the
behavior is well defined from the start.  This document has also been released
in private security volunteer circles for validation, and has been modified
slightly at the suggestions of a few individuals.

\subsection{Software Design}
\label{software_design}
The Software Design document \cite{Design} is the document that describes how
each feature will be implemented.  This document is not complete as of yet, as
it will evolve as development on the tool continues.  

\subsection{Testing and Validation}
\label{testing_and_evaluation}
The Testing and Validation document \cite{Testing} is the document that
describes how the tool will be tested and checked to ensure it is implemented
properly.  As mentioned previously, testing the tool is going to be a big hurdle
and one of the main focuses of the authors of this tool.  

Since the requirements and specifications phase has just been completed and the
design phase has just begun, the testing document is not complete either. 
Rather, like the Software Design Document \cite{Design}, it will grow as the
development of this tool progresses.  

\newpage



\section{Scope Limit} \label{scope_limit}
The scope of this project is much larger than can be reasonably finished in the
time-frame for the course.  As is mentioned in sections 
\ref{project_management} and \ref{project_progress}, it has taken five weeks
just to write the requirements and specifications for the project.  Therefore,
due to the sheer amount of features this tool will have as well as the amount of
testing on varying environments that will be required, at the suggestion of the
professor of the Senior Project course, the authors have instituted a scope
limit for the completion of the project.  Since the scanning functionality is
the most valuable part of the tool, this functionality will be completed in time
for the project deadline of the course.  If this functionality is completed and
verified quickly and there is time to spare, the following features will be
added in the specified order:

\begin{enumerate}
    \item Scripting 
    \item GUI 
    \item Enumeration of Firefox data
    \item Enumeration of Google Chrome data
    \item Spoofed DNS check
    \item ``Value Added'' scripting actions, such as MRC upload or VirusTotal
    upload
    \item Checkboxes and fix generation on the GUI
\end{enumerate}

In the event any of these features are added, Instalog will remain a functional,
shippable, well-tested, production-quality tool, suitable for the final senior
project submission.  If a feature is attempted but cannot be developed to a
satisfactory level in time for the submission, a previously stable release of
the tool will be reverted to and turned in.  

The authors of this tool will complete any remaining deliverables outside of the
Senior Project course in the free time between when classes and summer
internships / employment begins.  

\newpage



\section{Project Management and Administrative Details}
\label{project_management} 
When the concept for this project was originally realized, the intent was that
the entire project would be implemented, tested, and shippable by the end of the
Senior Project class.  However, since the authors have other courses as well as
jobs and extra-curricular activities, it gradually became evident that the
original timeline would not be even remotely feasible.  For instance, the
original hope was the entire Software Requirements Specification
\cite{Specification} would be finished in a day over the weekend.  Despite
working on the document for an entire weekend, the document was not finished in
the intended time period.  In fact, it took several weeks to finish the
document.  

Around the due date of the Project Proposal, the authors spent some time
developing a realistic view of the project.  Out of this came the Scope Limit
(section~\ref{scope_limit}) explained in the preceding section.  It was decided
that instead of letting standards slip and shipping a shoddy product that could
potentially ruin users' machines, that instead the first component of the
product would be implemented and tested well.  Then, after the course, work
would continue on the remaining items.  The hope is that since the Specification
Document was written so thoroughly, the implementation and testing will not be
as time consuming and that the timeline can be shortened and more features can
be implemented.  However, given the oversights that were present in the original
timeline, this is the best realistic timeline that is possible at the moment.  

\begin{figure}[h]
  	\centering
	\includegraphics[scale=.7]{figures/GanttChart.png}
  	\caption{Gantt Chart}
  	\label{gantt}
\end{figure}

The Gantt Chart for the project is included in Figure~\ref{gantt}.  Currently,
roughly 40\% of the semester has elapsed, and the specification document has
just been finished.  Until spring break, the scanning feature will be designed
and have a testing plan established.  Then, over spring break, the first
prototypes of the scanning features will be started.  The hope is that a
reasonably complete proof of concept will be ready and demo-able by the Interim
Report \#2 milestone.  Then, for a little more than two weeks, the product will
be tested according to the established plan on all target operating systems.  A
beta version of the project will also be released in a few closed circles of the
security community for evaluation and usability testing.  Lastly, the product
will be finalized and shipped in the last few days before the final report is
due.  The intent is that at this point, the tool will be ready to start taking
over for existing scanning tools.  

The authors of the tool plan on using pair programming at the very beginning of
the project to establish a good common codebase.  Then, once a fairly
standardized way of implementing scanning features is established, the design
and test documents will be updated and finalized for the scanning features. 
Then, the authors will use test driven development and alternate between writing
scanning features and testing each other's features.  Ideally, this will ease
the burden of testing when it comes to validating the product on each target
operating system.  To test the product on the various target operating systems,
the authors will use virtual machines.  Since both authors have MSDN licenses,
getting the required installation media and licenses is not an issue.  In fact,
the majority of the virtual machines are already installed, updated, and ready
to be tested.  

\newpage



\section{Project Progress} \label{project_progress}
In the above sections, it was mentioned that the original timeline for the
product was unrealistically aggressive.  In the timeline, the specification
documents would have been completed in a weekend and the scanning features would
have been implemented by now.  It is now obvious that this is unrealistic and
potentially dangerous for future users of this tool.  Therefore, the Scope Limit
(section~\ref{scope_limit}) was put into place to keep the project realistic.  

As of this writing, the majority of the work has been planning and documentation
(primarily in writing the specifications).  Since the first use of this tool is
for information gathering, several weeks of time had to be spent in carefully
identifying where the information would be gathered from, how it would be
displayed, and how it would be whitelisted.  Since the second use of this tool
is for fixing machines, the fix script specification had to be designed
incredibly carefully, which took about a week.  The work done in this respect is
found in the documents referenced in section~\ref{software_requirements} and
section~\ref{software_specifications}.  

While it may seem strange that very little code has been written yet, it is
important to keep things in perspective.  The aforementioned documents are over
one hundred pages in length.  Going through the commit history in the source
control indicates that about eighty hours of time were spent on this
documentation alone.  The reasoning for this is that the documentation has to be
incredibly precise and detailed so that the behavior is well defined before
starting the project.  This is important because this product will be scanning
and modifying integral parts of the Windows operating system.  Therefore, no
room could be left for error in the original design of the product.  This will
also hopefully make the actual implementation of the project more
straightforward because a majority of the thinking and design has been done in
advance.  Lastly, it is important to remember that the scope of this project
reaches beyond the timeline for this class.  Even though the documentation for
the total project took this long to write, the intent is that only the first
major component of the project will be implemented.  The fact that the semester
is almost half over is not a concern because the remaining features will be
implemented outside of the course and the features that will be delivered by the
end of the semester will result in a shippable and complete product.  

\newpage



\section{Discussion and Conclusions} \label{discussion}
Previously, this report discussed the fact that the original timeline for the
project was nowhere near realistic.  This was an oversight on the part of the
authors who originally thought that each deliverable would take only a small
fraction of the time it actually took to complete.  This is the biggest learning
point so far in the project.  

In retrospect, the dangers of feature creep are very real as well.  After adding
each small feature, it seemed that there were a handful of other supplemental
features that would be great to add.  Despite ignoring most of these features,
there are still more features in the project that can realistically be finished
during the course.  

Despite all of this, the importance of good software engineering practices are
very evident in this project.  Going forward, a lot of time will be saved by
putting the initial investment into the detailed requirements and specifications
documents.  Additionally, the product will be easier to validate because these
documents precisely explain how the product is supposed to behave. 

\newpage



\section{External Documents} \label{documents}
As of this writing, there are not currently any additional external documents
beyond the documents listed in section~\ref{design}.  By the final release of
the product, however, there will be a user's manual and programmer's manual that
will be included as external projects.  A list of third-party software use and
incorporation in the project will be included in the Design Document
\cite{Design}.

\newpage



\bibliography{ProjectReport}{} 
\bibliographystyle{plain}

\newpage



\appendix
\section{License} \label{license}
Instalog itself is to be released under the two clause form of the BSD license,
which is reprinted below:

\begin{verbatim}
Copyright Â© 2012, Jacob Snyder, Billy O'Neal III, and "sUBs"
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met: 

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer. 
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution. 

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
\end{verbatim}

This document, along with all other documentation related to Instalog,  is to be
released under the Creative Commons Attribution 3.0 Unported license. Human
readable and lawyer readable versions of this license can be found at
\url{http://creativecommons.org/licenses/by/3.0/}.

\newpage



\end{document}
